<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–¢–æ–ª—å–∫–æ –ú—ã | –í–∞–Ω–µ—á–∫–∞ –∏ –î–∞—à—É–ª—è</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --bg-dark: #0a0a14;
            --bg-black: #000000;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            
            --glow-normal: rgba(255, 255, 255, 0.5);
            --glow-loud: #a29bfe; /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
            --glow-match: #00cec9; /* –ë–∏—Ä—é–∑–∞ */
            --glow-action: #fdcb6e; /* –ó–æ–ª–æ—Ç–æ */
            --glow-secret: #ff7675; /* –†–æ–∑–æ–≤—ã–π/–ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –∂–µ–ª–∞–Ω–∏–π */

            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-black) 100%);
            font-family: 'Quicksand', sans-serif;
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        .orbs-container {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: float 12s infinite alternate ease-in-out;
        }
        .orb-1 { width: 300px; height: 300px; background: #6c5ce7; top: -50px; left: -50px; }
        .orb-2 { width: 250px; height: 250px; background: #00cec9; bottom: 10%; right: -20px; animation-delay: -2s; }
        .orb-3 { width: 200px; height: 200px; background: #fdcb6e; top: 40%; left: 40%; animation-delay: -5s; opacity: 0.2; }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 50px); }
        }

        /* Main Container */
        #app {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 500px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .screen {
            display: none;
            flex-direction: column;
            width: 100%;
            height: 100%;
            padding: calc(var(--safe-top) + 20px) 24px calc(var(--safe-bottom) + 30px);
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .screen.active { display: flex; opacity: 1; }

        h1, h2 { font-family: 'Pacifico', cursive; margin: 0; font-weight: 400; }
        h1 { font-size: 3rem; text-align: center; margin-bottom: 10px; text-shadow: 0 4px 15px rgba(0,0,0,0.5); }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .btn {
            background: linear-gradient(90deg, #6c5ce7, #a29bfe);
            border: none;
            color: white;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.4);
            text-align: center;
            font-family: 'Quicksand', sans-serif;
            width: 100%;
        }
        .btn:active { transform: scale(0.96); }
        .btn-secondary { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); box-shadow: none; }

        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }
        .player-score { display: flex; flex-direction: column; align-items: center; transition: all 0.5s ease; opacity: 0.5; transform: scale(0.9); }
        .player-score.active { opacity: 1; transform: scale(1.1); text-shadow: 0 0 20px rgba(255,255,255,0.4); }
        .p-name { font-family: 'Pacifico'; font-size: 1.2rem; }
        .p-points { font-size: 1.5rem; font-weight: 700; color: #fdcb6e; }
        .heart-divider { font-size: 1.5rem; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* CARD */
        .card-container {
            width: 100%;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1000px;
            margin: 10px 0;
            position: relative;
        }
        
        .game-card {
            width: 100%;
            min-height: 380px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            position: absolute;
        }

        .category-badge {
            position: absolute;
            top: 20px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.8;
            padding: 6px 16px;
            border-radius: 20px;
            background: rgba(0,0,0,0.4);
            font-weight: 700;
        }

        .question-text {
            font-size: 1.5rem;
            line-height: 1.4;
            font-weight: 600;
            transition: filter 0.5s ease, opacity 0.5s ease;
        }
        .question-text.blurred { filter: blur(20px); opacity: 0.8; cursor: pointer; }
        
        .loud-hint {
            color: var(--glow-loud);
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: none;
            font-weight: bold;
            border: 1px solid var(--glow-loud);
            padding: 8px 15px;
            border-radius: 12px;
        }

        /* CARD STYLES */
        .card-normal { border-color: rgba(255,255,255,0.3); box-shadow: 0 0 25px rgba(255,255,255,0.1); }
        .card-loud { border-color: #a29bfe; box-shadow: 0 0 30px rgba(162, 155, 254, 0.25); }
        .card-match { border-color: #00cec9; box-shadow: 0 0 30px rgba(0, 206, 201, 0.25); }
        .card-action { border-color: #fdcb6e; box-shadow: 0 0 30px rgba(253, 203, 110, 0.25); }
        .card-secret { border-color: #ff7675; box-shadow: 0 0 35px rgba(255, 118, 117, 0.3); }

        /* INPUTS (Match & Secret) */
        .input-area { width: 100%; display: none; flex-direction: column; gap: 10px; margin-top: 20px; animation: fadeIn 0.4s ease; }
        .input-area.visible { display: flex; }
        
        input {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            padding: 12px; border-radius: 12px; color: white;
            font-size: 1rem; text-align: center; outline: none; font-family: 'Quicksand';
        }
        
        .secret-reveal-text { margin-top: 20px; color: var(--glow-match); font-weight: bold; display: none; background: rgba(0,0,0,0.4); padding: 10px; border-radius: 10px; }

        /* TIMER BAR */
        .timer-container {
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-bottom: 15px;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .timer-bar {
            height: 100%;
            background: linear-gradient(90deg, #00cec9, #a29bfe);
            width: 100%;
            transform-origin: left;
        }

        /* CONTROLS */
        .controls { width: 100%; display: flex; gap: 15px; opacity: 0; pointer-events: none; transform: translateY(20px); transition: all 0.4s ease; }
        .controls.active { opacity: 1; pointer-events: auto; transform: translateY(0); }
        .btn-super { flex: 2; background: linear-gradient(90deg, #fdcb6e, #fab1a0); color: #000; }
        .btn-skip { flex: 1; }

        /* FINAL SCREEN */
        .final-wishes { text-align: left; margin-top: 20px; font-size: 0.9rem; }
        .wish-box { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px; margin-bottom: 10px; }
        .wish-author { color: #fdcb6e; font-size: 0.8rem; margin-bottom: 5px; }

        /* Animations */
        .card-exit { transform: translateY(-120%) rotate(10deg); opacity: 0; }
        .card-enter { transform: translateY(100%) rotate(-5deg); opacity: 0; }
        .card-active { transform: translateY(0) rotate(0); opacity: 1; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

    </style>
</head>
<body>
    <div class="orbs-container">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <div id="app">
        <div id="start-screen" class="screen active" style="justify-content: center; align-items: center; text-align: center;">
            <h1 style="font-size: 4rem;">–¢–æ–ª—å–∫–æ –ú—ã</h1>
            <p style="font-size: 1.2rem; margin-bottom: 40px; color: #a29bfe;">–í–∞–Ω–µ—á–∫–∞ & –î–∞—à—É–ª—è</p>
            <div style="font-size: 3rem; margin-bottom: 40px;">‚ù§Ô∏è</div>
            <button class="btn" onclick="game.start()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>

        <div id="game-screen" class="screen">
            <div class="header">
                <div class="player-score" id="score-p1">
                    <span class="p-name">–í–∞–Ω–µ—á–∫–∞</span>
                    <span class="p-points" id="points-p1">0</span>
                </div>
                <div class="heart-divider">‚ù§Ô∏è</div>
                <div class="player-score" id="score-p2">
                    <span class="p-name">–î–∞—à—É–ª—è</span>
                    <span class="p-points" id="points-p2">0</span>
                </div>
            </div>

            <div class="card-container">
                <div id="card" class="glass-panel game-card card-normal" onclick="game.revealCard()">
                    <span class="category-badge" id="card-cat">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                    
                    <div id="loud-hint" class="loud-hint">üéß –ù–∞–¥–µ–≤–∞–π –Ω–∞—É—à–Ω–∏–∫–∏ —Å –º—É–∑—ã–∫–æ–π!</div>
                    
                    <div class="question-text blurred" id="card-text">–í–æ–ø—Ä–æ—Å</div>
                    <div style="margin-top:auto; font-size:0.8rem; opacity:0.6;" id="tap-hint">–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç—É</div>

                    <div id="match-area" class="input-area">
                        <input type="text" id="match-input" placeholder="–ó–∞–ø–∏—à–∏ –æ—Ç–≤–µ—Ç..." onclick="event.stopPropagation()">
                        <button class="btn btn-secondary" onclick="event.stopPropagation(); game.saveMatchAnswer()" style="padding: 10px;">–ì–æ—Ç–æ–≤–æ</button>
                    </div>
                    
                    <div id="secret-area" class="input-area">
                        <p id="secret-label" style="font-size: 0.9rem; margin-bottom:5px;">–í–∞–Ω–µ—á–∫–∞, –ø–∏—à–∏ –∂–µ–ª–∞–Ω–∏–µ:</p>
                        <input type="text" id="secret-input" placeholder="–•–æ—á—É..." onclick="event.stopPropagation()">
                        <button class="btn btn-secondary" onclick="event.stopPropagation(); game.saveSecretWish()" style="padding: 10px;">–ó–∞–ø–∏—Å–∞—Ç—å</button>
                    </div>

                    <div id="info-msg" class="hidden" style="margin-top:15px; font-weight:bold; color:#00cec9;"></div>
                    <button id="show-answer-btn" class="btn hidden" style="margin-top: 15px; font-size: 0.9rem; padding: 10px;" onclick="event.stopPropagation(); game.revealMatchAnswer()">üëÄ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
                    <div id="secret-reveal" class="secret-reveal-text"></div>
                </div>
            </div>

            <div class="timer-container" id="timer-cont">
                <div class="timer-bar" id="timer-bar"></div>
            </div>

            <div class="controls" id="controls">
                <button class="btn btn-secondary btn-skip" onclick="game.nextCard(false)">–ü—Ä–æ–ø—É—Å–∫</button>
                <button class="btn btn-super" onclick="game.nextCard(true)">–°—É–ø–µ—Ä! +1</button>
            </div>
        </div>

        <div id="final-screen" class="screen" style="justify-content: center; text-align: center;">
            <div style="font-size: 4rem; margin-bottom: 10px;">üèÜ</div>
            <h1 id="winner-title">–õ—é–±–æ–≤—å –ø–æ–±–µ–¥–∏–ª–∞!</h1>
            <div id="final-score-text" style="font-size: 1.5rem; margin-bottom: 20px;"></div>
            
            <div class="glass-panel" style="padding: 20px; width: 100%; max-height: 40vh; overflow-y: auto;">
                <h3>–†–∞—Å–∫—Ä—ã—Ç—ã–µ –∂–µ–ª–∞–Ω–∏—è ‚ú®</h3>
                <div class="final-wishes">
                    <div class="wish-box">
                        <div class="wish-author">–ñ–µ–ª–∞–Ω–∏–µ –í–∞–Ω–µ—á–∫–∏:</div>
                        <div id="final-wish-p1">...</div>
                    </div>
                    <div class="wish-box">
                        <div class="wish-author">–ñ–µ–ª–∞–Ω–∏–µ –î–∞—à—É–ª–∏:</div>
                        <div id="final-wish-p2">...</div>
                    </div>
                </div>
            </div>
            
            <button class="btn" style="margin-top: 20px;" onclick="location.reload()">–ï—â–µ —Ä–∞–∑</button>
        </div>
    </div>

    <script>
        // 50 –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
        const RAW_QUESTIONS = [
            // –õ–∏—á–Ω–æ–µ –∏ –ø—Ä–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
            { t: "–ß—Ç–æ –∑–∞ ¬´–º–æ–Ω—Å—Ç—Ä¬ª –ø–ª–∞–≤–∞–ª –≤ —Ä–µ–∫–µ –Ω–∞ –Ω–∞—à–µ–º –ø–µ—Ä–≤–æ–º —Ä–∞—Å—Å–≤–µ—Ç–µ?", c: "match" },
            { t: "–ö—Ç–æ –∏–∑ –Ω–∞—Å –±–æ–ª–µ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π? (–ò–∑–æ–±—Ä–∞–∑–∏ –µ–≥–æ —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É)", c: "action" },
            { t: "–ö–∞–∫–æ–µ —à–æ—É –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –≤–µ—á–µ—Ä–æ–º?", c: "match" },
            { t: "–¢–≤–æ–π –ª—é–±–∏–º—ã–π –º–æ–º–µ–Ω—Ç –∑–∞ —ç—Ç–∏ 2 –≥–æ–¥–∞?", c: "normal" },
            { t: "–ß—Ç–æ –í–∞–Ω–µ—á–∫–∞ –¥–µ–ª–∞–µ—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ, –∫–æ–≥–¥–∞ –î–∞—à—É–ª—è –≥—Ä—É—Å—Ç–∏—Ç?", c: "normal" },
            { t: "–ö–∞–∫–∞—è –Ω–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è?", c: "match" },
            { t: "–ö—Ç–æ –∏–∑ –Ω–∞—Å –ª—É—á—à–µ –∏–≥—Ä–∞–µ—Ç –≤ –Ω–∞—Å—Ç–æ–ª–∫–∏, –∞ –∫—Ç–æ –±–æ–ª—å—à–µ –∂—É–ª—å–Ω–∏—á–∞–µ—Ç?", c: "match" },
            { t: "–°–∞–º–∞—è —Å–º–µ—à–Ω–∞—è –≤–µ—â—å, –∫–æ—Ç–æ—Ä—É—é –î–∞—à—É–ª—è —Å–¥–µ–ª–∞–ª–∞ –≤–æ —Å–Ω–µ?", c: "loud" },
            { t: "–û–±–Ω–∏–º–∏ –º–µ–Ω—è —Ç–∞–∫ –∫—Ä–µ–ø–∫–æ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –º–æ–∂–µ—à—å.", c: "action" },
            { t: "–°–∞–º–æ–µ –≤–∫—É—Å–Ω–æ–µ –±–ª—é–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –≥–æ—Ç–æ–≤–∏–ª–∏ –≤–º–µ—Å—Ç–µ (–∏–ª–∏ –∑–∞–∫–∞–∑—ã–≤–∞–ª–∏)?", c: "match" },
            { t: "–ö–∞–∫–æ–µ '—à–æ—É –Ω–∞ –≤–µ—á–µ—Ä' —É –Ω–∞—Å —Å–∞–º–æ–µ –ª—é–±–∏–º–æ–µ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç?", c: "match" },
            { t: "–í—Å–ø–æ–º–Ω–∏ —Å–∞–º—É—é —Å—Ç—Ä–∞–Ω–Ω—É—é –≤–µ—â—å, –∫–æ—Ç–æ—Ä—É—é –º—ã –¥–µ–ª–∞–ª–∏ –≤–º–µ—Å—Ç–µ.", c: "normal" },
            { t: "–ö—Ç–æ –∏–∑ –Ω–∞—Å —á–∞—â–µ –∑–∞–±—ã–≤–∞–µ—Ç –∫–ª—é—á–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω?", c: "match" },
            { t: "–ï—Å–ª–∏ –±—ã –í–∞–Ω–µ—á–∫–∞ –±—ã–ª –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–π –∏–≥—Ä–æ–π, —Ç–æ –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ?", c: "match" },
            // –ì—Ä–æ–º–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω–∞—É—à–Ω–∏–∫–∏) - —á–∏—Ç–∞–µ–º –ø–æ –≥—É–±–∞–º
            { t: "¬´–Ø —Ö–æ—á—É –º–∞—Å—Å–∞–∂ –Ω–æ–≥ —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º¬ª", c: "loud" },
            { t: "¬´–¢—ã –º–æ—è —Å–∞–º–∞—è –≤—Ä–µ–¥–Ω–∞—è –±—É–ª–æ—á–∫–∞¬ª", c: "loud" },
            { t: "¬´–î–∞–≤–∞–π –∫—É–ø–∏–º –µ—â–µ –æ–¥–Ω—É –Ω–∞—Å—Ç–æ–ª–∫—É¬ª", c: "loud" },
            { t: "¬´–£ —Ç–µ–±—è —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è —É–ª—ã–±–∫–∞¬ª", c: "loud" },
            { t: "¬´–¢—ã –º–æ–π —Å–∞–º—ã–π –∫—Ä–∞—Å–∏–≤—ã–π –∫–æ—Ç–µ–Ω–æ–∫/–ª–∞–ø—É–ª—è¬ª", c: "loud" },
            { t: "¬´–•–æ—á—É –ø–æ—Ü–µ–ª–æ–≤–∞—Ç—å —Ç–µ–±—è –≤ –Ω–æ—Å–∏–∫¬ª", c: "loud" },
            { t: "–¢—ã ‚Äî –º–æ–π —Å–∞–º—ã–π –≥–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑ –≤ –∂–∏–∑–Ω–∏", c: "loud" },
            { t: "¬´–¢—ã –≥–æ—Ç–æ–≤–∏—à—å –≤–∫—É—Å–Ω–µ–µ –≤—Å–µ—Ö –Ω–∞ —Å–≤–µ—Ç–µ¬ª", c: "loud" },
            { t: "–Ø –ª—é–±–ª—é —Ç–µ–±—è –±–æ–ª—å—à–µ, —á–µ–º —Å–µ—Ä–∏–∞–ª—ã", c: "loud" },
            { t: "–î–∞–≤–∞–π —Å—ä–µ–∑–¥–∏–º –Ω–∞ –¥–∞—á—É –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ", c: "loud" },
            { t: "–¢—ã —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è, –∫–æ–≥–¥–∞ –∑–ª–∏—à—å—Å—è", c: "loud" },
            { t: "–ü–æ—Ü–µ–ª—É–π –º–µ–Ω—è, —è —Å–æ—Å–∫—É—á–∏–ª—Å—è", c: "loud" },
            // Actions
            { t: "–°–¥–µ–ª–∞–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏ –ª–∏—Ü–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞.", c: "action" },
            { t: "–°—Ç–∞–Ω—Ü—É–π –ø–æ–±–µ–¥–Ω—ã–π —Ç–∞–Ω–µ—Ü –í–∞–Ω–µ—á–∫–∏.", c: "action" },
            { t: "–ü–æ—Ü–µ–ª—É–π –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤ —à–µ—é 3 —Ä–∞–∑–∞.", c: "action" },
            { t: "–°–¥–µ–ª–∞–π –º–∞—Å—Å–∞–∂ –ø–ª–µ—á –≤ —Ç–µ—á–µ–Ω–∏–µ 1 –º–∏–Ω—É—Ç—ã.", c: "action" },
            { t: "–ü–æ—Å–º–æ—Ç—Ä–∏ –≤ –≥–ª–∞–∑–∞, –Ω–µ –º–æ—Ä–≥–∞—è, –∫—Ç–æ –¥–æ–ª—å—à–µ?", c: "action" },
            { t: "–ù–∞–ø–∏—à–∏ –ø–∞–ª—å—Ü–µ–º –Ω–∞ —Å–ø–∏–Ω–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ —Å–ª–æ–≤–æ, –æ–Ω –¥–æ–ª–∂–µ–Ω —É–≥–∞–¥–∞—Ç—å.", c: "action" },
            { t: "–ò–∑–æ–±—Ä–∞–∑–∏, –∫–∞–∫ –î–∞—à—É–ª—è –∑–ª–∏—Ç—Å—è.", c: "action" },
            { t: "–ò–∑–æ–±—Ä–∞–∑–∏, –∫–∞–∫ –í–∞–Ω–µ—á–∫–∞ –º–æ–ª—á–∏—Ç (—Å–º–µ—à–Ω–æ).", c: "action" },
            { t: "–ü–æ–º–µ–Ω—è–π—Ç–µ—Å—å –Ω–∞ –æ–¥–Ω—É –º–∏–Ω—É—Ç—É —Ä–æ–ª—è–º–∏: –í–∞–Ω–µ—á–∫–∞ ‚Äî —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –î–∞—à—É–ª—è ‚Äî —Ç–∏—Ö–∞—è.", c: "action" },
            // Match (–°–æ–≤–ø–∞–¥–µ–Ω–∏—è)
            { t: "–õ—é–±–∏–º—ã–π —Ü–≤–µ—Ç –î–∞—à—É–ª–∏?", c: "match" },
            { t: "–°–∫–æ–ª—å–∫–æ —Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –º—ã –≤—Å—Ç—Ä–µ—á–∞–µ–º—Å—è? (–≤ –º–µ—Å—è—Ü–∞—Ö)", c: "match" },
            { t: "–ö–∞–∫–æ–π —Ñ–∏–ª—å–º –º—ã –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –±—ã –≤–µ—á–Ω–æ?", c: "match" },
            { t: "–ö—Ç–æ –∏–∑ –Ω–∞—Å —á–∞—â–µ –∏–¥–µ—Ç –Ω–∞ –ø—Ä–∏–º–∏—Ä–µ–Ω–∏–µ –ø–µ—Ä–≤—ã–º?", c: "match" },
            { t: "–ò–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –Ω–∞—à–µ–π —Å–≤–∞–¥—å–±—ã (–≤ —Ç–µ–æ—Ä–∏–∏)?", c: "match" },
            { t: "–ö–∞–∫—É—é –µ–¥—É –í–∞–Ω–µ—á–∫–∞ –Ω–µ–Ω–∞–≤–∏–¥–∏—Ç?", c: "match" },
            { t: "–ß–µ–≥–æ –î–∞—à—É–ª—è –±–æ–∏—Ç—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?", c: "match" },
            // Normal
            { t: "–ó–∞ —á—Ç–æ —Ç—ã –ª—é–±–∏—à—å –º–µ–Ω—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?", c: "normal" },
            { t: "–ö–∞–∫–∞—è –º–æ—è –ø—Ä–∏–≤—ã—á–∫–∞ —Ç–µ–±—è —Å–º–µ—à–∏—Ç?", c: "normal" },
            { t: "–í –∫–∞–∫–æ–π –æ–¥–µ–∂–¥–µ —è –Ω—Ä–∞–≤–ª—é—Å—å —Ç–µ–±–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?", c: "normal" },
            { t: "–û —á–µ–º –ø–∞—Ä—Ç–Ω–µ—Ä –º–µ—á—Ç–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å (–∫—Ä–æ–º–µ —Å–Ω–∞)?", c: "normal" },
            { t: "–ï—Å–ª–∏ –±—ã –º—ã –±—ã–ª–∏ –≥–µ—Ä–æ—è–º–∏ —Å–µ—Ä–∏–∞–ª–∞, –∫—Ç–æ –±—ã –º—ã –±—ã–ª–∏?", c: "normal" },
            { t: "–û–¥–Ω–∞ –≤–µ—â—å, –∫–æ—Ç–æ—Ä—É—é —Ç—ã —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å —Å–æ –º–Ω–æ–π –≤ —ç—Ç–æ–º –≥–æ–¥—É?", c: "normal" },
            { t: "–¢–≤–æ–µ –ª—é–±–∏–º–æ–µ —Ñ–æ—Ç–æ —Å–æ –º–Ω–æ–π?", c: "normal" },
            { t: "–ö–∞–∫ —Ç—ã –Ω–∞–∑—ã–≤–∞–µ—à—å –º–µ–Ω—è –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ?", c: "normal" },
            { t: "–ß—Ç–æ —Ç—ã –ø–æ–¥—É–º–∞–ª(–∞), –∫–æ–≥–¥–∞ –º—ã –≤–ø–µ—Ä–≤—ã–µ –ø–æ—Ü–µ–ª–æ–≤–∞–ª–∏—Å—å?", c: "normal" },
            { t: "–ö–∞–∫—É—é —Å—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ç—ã –±—ã –º–Ω–µ –ø–æ–¥–∞—Ä–∏–ª(–∞)?", c: "normal" },
            { t: "–ù–∞–∑–æ–≤–∏ 3 –ø—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É –º—ã –æ—Ç–ª–∏—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.", c: "normal" },
            { t: "–ö–∞–∫–æ–π –º–æ–π –ø–æ—Å—Ç—É–ø–æ–∫ –±—ã–ª —Å–∞–º—ã–º –º–∏–ª—ã–º?", c: "normal" },
            { t: "–ü–µ—Å–Ω—è, –∫–æ—Ç–æ—Ä–∞—è –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å –Ω–∞–º–∏?", c: "normal" },
            { t: "–ó–∞ —á—Ç–æ —Ç—ã –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω(–Ω–∞) —ç—Ç–æ–π '—Å—Ç—Ä–∞–Ω–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ' –¥—Ä—É–∑–µ–π –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?", c: "normal" },
            { t: "–ö–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ –∑–∞ —ç—Ç–∏ 2 –≥–æ–¥–∞ —Å–±–ª–∏–∑–∏–ª–æ –Ω–∞—Å —Å–∏–ª—å–Ω–µ–µ –≤—Å–µ–≥–æ?", c: "normal" },
            { t: "–ß—Ç–æ —Ç–µ–±–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω—Ä–∞–≤–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å –≤–º–µ—Å—Ç–µ, –∫–æ–≥–¥–∞ –º—ã –Ω–∏–∫—É–¥–∞ –Ω–µ —Ç–æ—Ä–æ–ø–∏–º—Å—è?", c: "normal" },
            { t: "–ö–∞–∫ —Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å –Ω–∞—Å —á–µ—Ä–µ–∑ 5 –ª–µ—Ç?", c: "normal" },
            { t: "–ö–∞–∫–∞—è —Ç–≤–æ—è –ª—é–±–∏–º–∞—è –ø—Ä–∏–≤—ã—á–∫–∞ —É –ø–∞—Ä—Ç–Ω–µ—Ä–∞?", c: "normal" },
            { t: "–ï—Å–ª–∏ –±—ã –º—ã –º–æ–≥–ª–∏ –ø–µ—Ä–µ–∂–∏—Ç—å –æ–¥–∏–Ω –¥–µ–Ω—å –∏–∑ –Ω–∞—à–µ–≥–æ –ø—Ä–æ—à–ª–æ–≥–æ —Å–Ω–æ–≤–∞, –∫–∞–∫–æ–π –±—ã —Ç—ã –≤—ã–±—Ä–∞–ª(–∞)?", c: "normal" },
            { t: "–ó–∞ —á—Ç–æ —Ç—ã –≤–ª—é–±–∏–ª—Å—è/–≤–ª—é–±–∏–ª–∞—Å—å –≤ –º–µ–Ω—è –≤ —Å–∞–º—ã–π –ø–µ—Ä–≤—ã–π —Ä–∞–∑?", c: "normal" },
            { t: "–ß—Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, –∫–æ–≥–¥–∞ —è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ —Ç–µ–±—è –æ–±–Ω–∏–º–∞—é?", c: "normal" },
            { t: "–ö–∞–∫–æ–π —Ç–≤–æ–π —Å–∞–º—ã–π –ª—é–±–∏–º—ã–π –∑–∞–ø–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–æ –º–Ω–æ–π?", c: "normal" },
            { t: "–ö–∞–∫—É—é —Å–æ–≤–º–µ—Å—Ç–Ω—É—é —Ç—Ä–∞–¥–∏—Ü–∏—é —Ç—ã –±—ã —Ö–æ—Ç–µ–ª(–∞) –∑–∞–≤–µ—Å—Ç–∏?", c: "normal" },
            { t: "–ï—Å–ª–∏ –±—ã –º—ã –±—ã–ª–∏ –∂–∏–≤–æ—Ç–Ω—ã–º–∏, —Ç–æ –∫–∞–∫–∏–º–∏? (–í–∞–Ω–µ—á–∫–∞ –∏ –î–∞—à—É–ª—è)", c: "normal" },
            { t: "–ß—Ç–æ —Ç—ã –ø–æ–¥—É–º–∞–ª(–∞), –∫–æ–≥–¥–∞ –≤–ø–µ—Ä–≤—ã–µ —É–≤–∏–¥–µ–ª(–∞) –º–µ–Ω—è –Ω–∞ —Ä–∞—Å—Å–≤–µ—Ç–µ —É —Ä–µ–∫–∏?", c: "normal" },
            { t: "–ö–∞–∫ —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ —è —Ç–µ–±—è –ª—é–±–ª—é, –¥–∞–∂–µ –µ—Å–ª–∏ —è –æ–± —ç—Ç–æ–º –Ω–µ –≥–æ–≤–æ—Ä—é?", c: "normal" },
            { t: "–ö–∞–∫–æ–µ –º–∞–ª–µ–Ω—å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å –º–æ–µ–π —Å—Ç–æ—Ä–æ–Ω—ã –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º(–æ–π)?", c: "normal" },
            { t: "–ß—Ç–æ –≤ –Ω–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∫–∞–∂–µ—Ç—Å—è —Ç–µ–±–µ —Å–∞–º—ã–º –Ω–∞–¥–µ–∂–Ω—ã–º?", c: "normal" },
            { t: "–û —á–µ–º —Ç—ã —á–∞—â–µ –≤—Å–µ–≥–æ –¥—É–º–∞–µ—à—å –ø–µ—Ä–µ–¥ —Å–Ω–æ–º, –∫–æ–≥–¥–∞ –º—ã –Ω–µ –≤–º–µ—Å—Ç–µ?", c: "normal" },
            { t: "–ï—Å–ª–∏ –±—ã –º—ã –º–æ–≥–ª–∏ –∑–∞–≥–∞–¥–∞—Ç—å –æ–¥–Ω–æ –æ–±—â–µ–µ –∂–µ–ª–∞–Ω–∏–µ –Ω–∞ –¥–≤–æ–∏—Ö, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?", c: "normal" },
            { t: "–ö–∞–∫–∞—è —Ç–≤–æ—è –ª—é–±–∏–º–∞—è —á–∞—Å—Ç—å –º–æ–µ–≥–æ —Ç–µ–ª–∞?", c: "normal" },
            { t: "–í —á–µ–º —Å–µ–∫—Ä–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ –¥–æ–ø–æ–ª–Ω—è–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞?", c: "normal" },
            { t: "–†–∞—Å—Å–∫–∞–∂–∏ –æ –º–æ–º–µ–Ω—Ç–µ, –∫–æ–≥–¥–∞ —Ç—ã –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –≥–æ—Ä–¥–∏–ª—Å—è/–≥–æ—Ä–¥–∏–ª–∞—Å—å –º–Ω–æ–π.", c: "normal" },
            { t: "–ö–∞–∫–æ–µ –Ω–∞—à–µ –æ–±—â–µ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ç—ã –±—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª(–∞) –≤ –∑–æ–ª–æ—Ç—É—é —Ä–∞–º–∫—É?", c: "normal" },
            { t: "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª(–∞) —Å–ø—Ä–æ—Å–∏—Ç—å —É –º–µ–Ω—è, –Ω–æ –≤—Å–µ–≥–¥–∞ —Å—Ç–µ—Å–Ω—è–ª—Å—è/—Å—Ç–µ—Å–Ω—è–ª–∞—Å—å?", c: "normal" }
        ];

        // –ê—É–¥–∏–æ
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const playSound = (type) => {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            
            if (type === 'pop') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(600, now); osc.frequency.exponentialRampToValueAtTime(300, now + 0.1);
                gainNode.gain.setValueAtTime(0.2, now); gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                osc.start(now); osc.stop(now + 0.1);
            } else if (type === 'reveal') {
                osc.type = 'triangle'; osc.frequency.setValueAtTime(400, now);
                gainNode.gain.setValueAtTime(0, now); gainNode.gain.linearRampToValueAtTime(0.2, now + 0.1); gainNode.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now); osc.stop(now + 0.3);
            } else if (type === 'win') {
                [523.25, 659.25, 783.99].forEach((freq, i) => {
                    const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
                    o.connect(g); g.connect(audioCtx.destination);
                    o.type = 'sine'; o.frequency.value = freq;
                    g.gain.setValueAtTime(0, now); g.gain.linearRampToValueAtTime(0.1, now + 0.1 + (i*0.05)); g.gain.exponentialRampToValueAtTime(0.01, now + 0.8);
                    o.start(now); o.stop(now + 0.8);
                });
            }
        };

        class Game {
            constructor() {
                this.p1 = { name: "–í–∞–Ω–µ—á–∫–∞", score: 0 };
                this.p2 = { name: "–î–∞—à—É–ª—è", score: 0 };
                this.currentPlayer = 1; 
                this.qList = [];
                this.qIndex = 0;
                this.isRevealed = false;
                this.matchAnswer = "";
                
                // Secret logic
                this.secretState = 0; // 0: none, 1: p1 writes, 2: p2 writes
                this.wishes = { p1: "", p2: "" };
                
                this.timerInterval = null;
            }

            start() {
                // Shuffle logic
                let shuffled = [...RAW_QUESTIONS].sort(() => Math.random() - 0.5);
                // –í—Å—Ç–∞–≤–ª—è–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Ä–æ–≤–Ω–æ –≤ —Å–µ—Ä–µ–¥–∏–Ω—É
                const secretQ = { t: "–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ", c: "secret" };
                shuffled.splice(Math.floor(shuffled.length / 2), 0, secretQ);
                
                this.qList = shuffled;
                this.switchScreen('start-screen', 'game-screen');
                playSound('pop');
                this.renderCardState();
            }

            switchScreen(fromId, toId) {
                document.getElementById(fromId).classList.remove('active');
                setTimeout(() => document.getElementById(toId).classList.add('active'), 500);
            }

            startTimer() {
                clearInterval(this.timerInterval);
                const bar = document.getElementById('timer-bar');
                const container = document.getElementById('timer-cont');
                container.style.opacity = '1';
                bar.style.width = '100%';
                
                let width = 100;
                // 30 —Å–µ–∫—É–Ω–¥ = 300 —Ç–∏–∫–æ–≤ –ø–æ 100–º—Å
                this.timerInterval = setInterval(() => {
                    width -= 0.33;
                    if (width <= 0) {
                        width = 0;
                        clearInterval(this.timerInterval);
                    }
                    bar.style.width = width + '%';
                }, 100);
            }

            stopTimer() {
                clearInterval(this.timerInterval);
                document.getElementById('timer-cont').style.opacity = '0';
            }

            getCurrentQ() { return this.qList[this.qIndex]; }

            renderCardState() {
                const q = this.getCurrentQ();
                const card = document.getElementById('card');
                const textEl = document.getElementById('card-text');
                const catBadge = document.getElementById('card-cat');
                const loudHint = document.getElementById('loud-hint');
                
                card.className = `glass-panel game-card card-${q.c} card-enter`;
                requestAnimationFrame(() => {
                    card.classList.remove('card-enter');
                    card.classList.add('card-active');
                });

                document.getElementById('score-p1').classList.toggle('active', this.currentPlayer === 2);
                document.getElementById('score-p2').classList.toggle('active', this.currentPlayer === 1);

                this.isRevealed = false;
                textEl.innerText = q.c === 'secret' ? "–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ..." : q.t;
                textEl.classList.add('blurred');
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                loudHint.style.display = 'none';
                if(q.c === 'loud') {
                    const listener = this.currentPlayer === 1 ? this.p2.name : this.p1.name;
                    const speaker = this.currentPlayer === 1 ? this.p1.name : this.p2.name;
                    loudHint.innerHTML = `üéß <b>${listener}</b> –Ω–∞–¥–µ–≤–∞–µ—Ç –Ω–∞—É—à–Ω–∏–∫–∏!<br><b>${speaker}</b> –æ–±—ä—è—Å–Ω—è–µ—Ç –≥—É–±–∞–º–∏.`;
                    loudHint.style.display = 'block';
                    catBadge.innerText = "–ì—Ä–æ–º–∫–∏–π üîä";
                } else if (q.c === 'match') catBadge.innerText = "–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ üß©";
                else if (q.c === 'action') catBadge.innerText = "–î–µ–π—Å—Ç–≤–∏–µ üé¨";
                else if (q.c === 'secret') catBadge.innerText = "–°–µ–∫—Ä–µ—Ç ü§´";
                else catBadge.innerText = "–í–æ–ø—Ä–æ—Å ‚ú®";

                // –°–±—Ä–æ—Å UI
                document.getElementById('tap-hint').style.display = 'block';
                document.getElementById('controls').classList.remove('active');
                document.getElementById('match-area').classList.remove('visible');
                document.getElementById('secret-area').classList.remove('visible');
                document.getElementById('info-msg').classList.add('hidden');
                document.getElementById('show-answer-btn').classList.add('hidden');
                document.getElementById('secret-reveal').classList.add('hidden');
                document.getElementById('match-input').value = "";
                document.getElementById('secret-input').value = "";
            }

            revealCard() {
                if (this.isRevealed) return;
                const q = this.getCurrentQ();
                
                document.getElementById('card-text').classList.remove('blurred');
                document.getElementById('tap-hint').style.display = 'none';
                playSound('reveal');
                this.isRevealed = true;
                this.startTimer();

                if (q.c === 'match') {
                    document.getElementById('match-area').classList.add('visible');
                    const asker = this.currentPlayer === 1 ? this.p1.name : this.p2.name;
                    document.getElementById('match-input').placeholder = `${asker}, –ø–∏—à–∏ –æ—Ç–≤–µ—Ç...`;
                } else if (q.c === 'secret') {
                    this.stopTimer(); // –ù–∞ —Å–µ–∫—Ä–µ—Ç–∞—Ö —Ç–∞–π–º–µ—Ä –Ω–µ –Ω—É–∂–µ–Ω
                    this.secretState = 1; // P1 turn
                    document.getElementById('secret-area').classList.add('visible');
                    document.getElementById('secret-label').innerText = `${this.p1.name}, –ø–∏—à–∏ –∂–µ–ª–∞–Ω–∏–µ:`;
                } else {
                    document.getElementById('controls').classList.add('active');
                }
            }

            saveMatchAnswer() {
                const input = document.getElementById('match-input');
                if (!input.value.trim()) return;
                this.matchAnswer = input.value;
                document.getElementById('match-area').classList.remove('visible');
                const answerer = this.currentPlayer === 1 ? this.p2.name : this.p1.name;
                const msg = document.getElementById('info-msg');
                msg.innerHTML = `–û—Ç–≤–µ—Ç –∑–∞–ø–∏—Å–∞–Ω!<br><span style="color:white">${answerer}, –æ—Ç–≤–µ—á–∞–π –≤—Å–ª—É—Ö!</span>`;
                msg.classList.remove('hidden');
                document.getElementById('show-answer-btn').classList.remove('hidden');
                playSound('pop');
            }

            revealMatchAnswer() {
                document.getElementById('info-msg').classList.add('hidden');
                document.getElementById('show-answer-btn').classList.add('hidden');
                const rev = document.getElementById('secret-reveal');
                rev.innerText = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${this.matchAnswer}`;
                rev.classList.remove('hidden');
                document.getElementById('controls').classList.add('active');
                playSound('reveal');
            }

            saveSecretWish() {
                const input = document.getElementById('secret-input');
                if(!input.value.trim()) return;
                
                if (this.secretState === 1) {
                    this.wishes.p1 = input.value;
                    input.value = "";
                    this.secretState = 2;
                    document.getElementById('secret-label').innerText = `${this.p2.name}, —Ç–µ–ø–µ—Ä—å —Ç—ã (–Ω–µ –ø–æ–¥—Å–º–∞—Ç—Ä–∏–≤–∞–π!):`;
                    playSound('pop');
                } else {
                    this.wishes.p2 = input.value;
                    document.getElementById('secret-area').classList.remove('visible');
                    const msg = document.getElementById('info-msg');
                    msg.innerHTML = "–ñ–µ–ª–∞–Ω–∏—è –∑–∞–ø–µ—á–∞—Ç–∞–Ω—ã –¥–æ –∫–æ–Ω—Ü–∞ –∏–≥—Ä—ã! üîí";
                    msg.classList.remove('hidden');
                    msg.style.color = "#ff7675";
                    document.getElementById('controls').classList.add('active');
                    playSound('win');
                }
            }

            nextCard(isSuper) {
                this.stopTimer();
                if (isSuper) {
                    playSound('win');
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    if (this.currentPlayer === 1) {
                        this.p2.score++;
                        document.getElementById('points-p2').innerText = this.p2.score;
                    } else {
                        this.p1.score++;
                        document.getElementById('points-p1').innerText = this.p1.score;
                    }
                }

                const card = document.getElementById('card');
                card.classList.remove('card-active');
                card.classList.add('card-exit');
                document.getElementById('controls').classList.remove('active');

                setTimeout(() => {
                    this.qIndex++;
                    if (this.qIndex >= this.qList.length) {
                        this.endGame();
                        return;
                    }
                    this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
                    this.renderCardState();
                }, 600);
            }

            endGame() {
                this.switchScreen('game-screen', 'final-screen');
                let res = `–°—á–µ—Ç: ${this.p1.score} : ${this.p2.score}`;
                document.getElementById('final-score-text').innerText = res;
                
                document.getElementById('final-wish-p1').innerText = this.wishes.p1 || "–ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–∞";
                document.getElementById('final-wish-p2').innerText = this.wishes.p2 || "–ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–∞";
                
                playSound('win');
                setTimeout(() => confetti({ particleCount: 200, spread: 100 }), 500);
            }
        }

        const game = new Game();
    </script>
</body>
</html>
